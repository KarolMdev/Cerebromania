<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Partes del Cerebro - Juego Educativo</title>
  <style>
    /* ... estilos existentes (sin cambios) ... */
  </style>
</head>
<body>

<h2>Arrastra la imagen a la funci√≥n correcta del cerebro</h2>

<button class="boton-reiniciar" onclick="reiniciarJuego()">üîÅ Reiniciar Juego</button>

<div class="contenedor" id="imagenes">
  <!-- Im√°genes (sin cambios en HTML) -->
</div>

<div class="funciones-scroll" id="funciones"></div>

<script>
  const funciones = [
    { id: "CortezaCerebral", pista: "Procesamiento de informaci√≥n compleja..." },
    { id: "lobuloFrontal", pista: "Toma de decisiones, razonamiento..." },
    { id: "lobuloParietal", pista: "Procesamiento de informaci√≥n sensorial..." },
    { id: "lobuloTemporal", pista: "Audici√≥n, comprensi√≥n del lenguaje..." },
    { id: "lobuloOccipital", pista: "Procesamiento de la informaci√≥n visual." },
    { id: "gangliosBasales", pista: "Regulaci√≥n y coordinaci√≥n del movimiento..." },
    { id: "SistemaLimbico", pista: "Regulaci√≥n de emociones..." },
    { id: "diencefalo", pista: "Incluye el t√°lamo y el hipot√°lamo..." },
    { id: "mensefalo", pista: "Procesamiento de est√≠mulos auditivos..." },
    { id: "puentedeVarolio", pista: "Conecta diferentes partes del cerebro..." },
    { id: "bulboraquideo", pista: "Control de funciones vitales..." },
    { id: "cerebelo", pista: "Coordinaci√≥n de movimientos..." }
  ];

  const funcionesContainer = document.getElementById("funciones");

  funciones.forEach(({ id, pista }) => {
    funcionesContainer.innerHTML += `
      <div class="zona-container">
        <div class="pista">Funci√≥n: ${pista}</div>
        <div class="zona-drop" ondrop="soltar(event)" ondragover="permitirSoltar(event)" data-correcta="${id}" id="zona-${id}"></div>
        <div class="mensaje" id="msg-${id}"></div>
      </div>
    `;
  });

  let idArrastrado;

  function empezarArrastre(event) {
    idArrastrado = event.target.id;
  }

  function permitirSoltar(event) {
    event.preventDefault();
  }

  function soltar(event) {
    event.preventDefault();
    const zona = event.currentTarget;
    const correcta = zona.getAttribute('data-correcta');
    const mensaje = document.getElementById(`msg-${correcta}`);
    const imagen = document.getElementById(idArrastrado);

    zona.innerHTML = '';

    if (idArrastrado === correcta) {
      zona.classList.remove('incorrecto');
      zona.classList.add('correcto');
      zona.appendChild(imagen);
      imagen.setAttribute('draggable', false);
      mensaje.textContent = "‚úîÔ∏è ¬°Bien hecho!";
    } else {
      zona.classList.remove('correcto');
      zona.classList.add('incorrecto');
      mensaje.textContent = "‚ùå Esa imagen no corresponde.";
      zona.textContent = "";
    }
  }

  // SOPORTE PARA CELULAR (TOUCH)
  const imagenes = document.querySelectorAll('.imagen');
  imagenes.forEach(img => {
    img.addEventListener('touchstart', e => {
      idArrastrado = e.target.id;
    });
  });

  const zonas = document.querySelectorAll('.zona-drop');
  zonas.forEach(zona => {
    zona.addEventListener('touchmove', e => {
      e.preventDefault();
    }, { passive: false });

    zona.addEventListener('touchend', e => {
      const touched = document.elementFromPoint(
        e.changedTouches[0].clientX,
        e.changedTouches[0].clientY
      );
      if (touched && touched.classList.contains('zona-drop')) {
        idArrastrado && soltar({ preventDefault: () => {}, currentTarget: touched });
      }
    });
  });

  function reiniciarJuego() {
    const contenedorImagenes = document.getElementById('imagenes');
    funciones.forEach(f => {
      const imagen = document.getElementById(f.id);
      if (!imagen) {
        const nuevaImg = document.createElement("img");
        nuevaImg.src = `resource/${f.id}.jpg`;
        nuevaImg.id = f.id;
        nuevaImg.className = "imagen";
        nuevaImg.setAttribute("draggable", "true");
        nuevaImg.ondragstart = empezarArrastre;
        nuevaImg.addEventListener("touchstart", e => idArrastrado = e.target.id);
        contenedorImagenes.appendChild(nuevaImg);
      } else {
        imagen.setAttribute('draggable', 'true');
        imagen.style.display = 'inline-block';
        contenedorImagenes.appendChild(imagen);
      }
    });

    funciones.forEach(f => {
      const zona = document.getElementById(`zona-${f.id}`);
      const mensaje = document.getElementById(`msg-${f.id}`);
      zona.className = 'zona-drop';
      zona.innerHTML = '';
      mensaje.textContent = '';
    });
  }
</script>

</body>
</html>
